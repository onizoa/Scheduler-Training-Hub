<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Scheduler Training Hub</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

  <style>
    .course-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    .page {
        grid-area: 1 / 1 / 2 / 2; /* Places all pages in the same grid cell */
        opacity: 0;
        pointer-events: none; /* Prevents interacting with hidden pages */
        transition: opacity 300ms ease-in-out;
      }
      .page.active {
        opacity: 1;
        pointer-events: auto; /* Allows interaction with the visible page */
      }
    .carousel-dot { transition: background-color 160ms ease, transform 160ms ease; }
    #imageModal { display: none; position: fixed; z-index: 60; left:0; top:0; width:100%; height:100%; background: rgba(0,0,0,0.75); align-items: center; justify-content: center; }
    #imageModal img { max-width: 92%; max-height: 92%; border-radius: 8px; box-shadow: 0 8px 30px rgba(0,0,0,0.6); }

    /* Training video styling */
    .training-video {
      width: 75%;
      max-height: 80vh;
      margin-left: auto;
      margin-right: auto;
      border-radius: 0.5rem;
      background-color: #f3f4f6;
      object-fit: contain;
      display: block;
    }
    @media (max-width: 768px) {
      .training-video { width: 100%; }
    }
  </style>
</head>
<body class="bg-gray-100">
  <div class="relative h-screen overflow-hidden">
    <!-- SIDEBAR -->
    <aside id="sidebar" class="sidebar bg-white w-64 border-r border-gray-200 flex-col flex transition-transform duration-300 ease-in-out transform -translate-x-full absolute inset-y-0 left-0 z-20">
      <div class="p-4 border-b border-gray-200">
        <div class="flex items-center space-x-3">
          <div class="bg-blue-100 p-2 rounded-lg">
            <i data-feather="book-open" class="w-6 h-6 text-blue-600"></i>
          </div>
          <button id="tab-dashboard-main" class="tab-btn font-semibold text-lg">Xtime Scheduler</button>
        </div>
      </div>

      <nav class="flex-1 p-4 space-y-2 overflow-y-auto" aria-label="Training chapters">
        <!-- Intro/Xtime -->
        <button id="tab-xtime-module" class="tab-btn flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="xtime-module">
          <i data-feather="play-circle" class="w-5 h-5"></i><span>Introduction</span>
        </button>
        <button id="tab-login" class="tab-btn flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="login">
          <i data-feather="log-in" class="w-5 h-5"></i><span>Logging In</span>
        </button>
        <button id="tab-dashboard" class="tab-btn flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="dashboard">
          <i data-feather="grid" class="w-5 h-5"></i><span>Dealership Selection</span>
        </button>
        <button id="tab-newappt" class="tab-btn flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="newappt">
          <i data-feather="plus-circle" class="w-5 h-5"></i><span>New Appointment</span>
        </button>
        <button id="tab-reschedule" class="tab-btn flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="reschedule">
          <i data-feather="edit" class="w-5 h-5"></i><span>Rescheduling</span>
        </button>
        <button id="tab-cancel" class="tab-btn flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="cancel">
          <i data-feather="x-circle" class="w-5 h-5"></i><span>Cancelling</span>
        </button>
        <button id="tab-newcustomer" class="tab-btn flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="newcustomer">
          <i data-feather="user-plus" class="w-5 h-5"></i><span>New Customer</span>
        </button>
      </nav>

      <div class="p-4 border-t border-gray-200">
        <button class="flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 text-gray-700 tab-btn" data-page="dashboard-main">
          <i data-feather="arrow-left" class="w-5 h-5"></i><span>Back to Modules</span>
        </button>
      </div>
    </aside>

    <!-- DASHBOARD MAIN PAGE -->
    <div id="main-content" class="h-full overflow-auto transition-all duration-300 ease-in-out">
      <header class="bg-white border-b border-gray-200 p-4 sticky top-0 z-10">
        <div class="flex justify-between items-center">
          <h1 id="main-header-title" class="text-xl font-semibold text-gray-800">Training Modules</h1>
          <div class="flex items-center space-x-4">
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i data-feather="search" class="h-4 w-4 text-gray-400"></i>
              </div>
              <input type="text" class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500" placeholder="Search...">
            </div>
            <button class="p-2 rounded-full hover:bg-gray-100" aria-label="Notifications">
              <i data-feather="bell" class="w-5 h-5 text-gray-600"></i>
            </button>
          </div>
        </div>
      </header>

      <main class="p-6 grid">

        <section id="dashboard-main" class="page active" aria-labelledby="main-header-title">
          <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white mb-8" data-aos="fade-up">
            <h2 class="text-2xl font-bold mb-2">Scheduler Training Suite</h2>
            <p class="max-w-lg">Select a training module to begin.</p>
          </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
              <div id="card-xime" role="button" tabindex="0" data-page="xtime-module" data-active-tab="tab-xtime-module" class="course-card bg-white rounded-xl overflow-hidden shadow-sm border border-gray-200 transition duration-300 cursor-pointer" data-aos="fade-up">
                <div class="h-40 bg-blue-100 flex items-center justify-center">
                  <img src="./images/Xtime Logo Vector.png" alt="Xtime Scheduler Logo" class="w-32 h-32 object-contain">
                </div>
                <div class="p-5">
                  <h3 class="font-semibold text-lg mb-2">Xtime Scheduler</h3>
                  <p class="text-gray-600 text-sm mb-4">The primary training guide for the Xtime scheduling application.</p>
                  <button class="w-full text-center bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition" data-page="xtime-module" data-active-tab="tab-xtime-module">Begin Training</button>
                </div>
              </div>

              <div class="bg-white rounded-xl overflow-hidden shadow-sm border border-gray-200 transition duration-300 opacity-60 cursor-not-allowed" data-aos="fade-up" data-aos-delay="100">
                <div class="h-48 bg-gray-100 flex items-center justify-center"><i data-feather="clock" class="w-12 h-12 text-gray-400"></i></div>
                <div class="p-5">
                  <h3 class="font-semibold text-lg mb-2">Future Scheduler</h3>
                  <p class="text-gray-600 text-sm mb-4">Placeholder for another training module. Coming soon.</p>
                  <button class="w-full text-center bg-gray-200 text-gray-500 px-4 py-2 rounded-lg font-medium cursor-not-allowed">Unavailable</button>
                </div>
              </div>
            </div>
        </section>
        <!-- END OF DASHBOARD MAIN PAGE -->

<!-- XTIME MODULE  -->
        <section id="xtime-module" class="page">
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8" data-aos="fade-up">
            <h2 class="text-2xl font-bold mb-6 text-center">Welcome to the Xtime Scheduler Training</h2>
            <video controls class="training-video" preload="metadata">
              <source src="./videos/Xtime Introduction.mp4" type="video/mp4">
              <track src="./captions/intro_en.vtt" kind="subtitles" srclang="en" label="English">
              Your browser does not support the video tag.
            </video>
          </div>
        </section>

       <!-- LOGGING IN (complete carousel + notes) TAB-->
        <section id="login" class="page">
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8" data-aos="fade-up">
            <h2 class="text-2xl font-bold mb-6 text-center">1 — Logging In</h2>

            <div class="relative max-w-6xl mx-auto rounded-lg overflow-hidden border">
              <div id="loginCarousel" class="relative p-4 bg-gray-50">
                <!-- Slide 1 -->
                <div class="carousel-slide w-full flex flex-col justify-center">
                  <video controls class="training-video" preload="metadata">
                    <source src="./videos/Xtime Login page.mp4" type="video/mp4">
                    <track src="./captions/login_step1.vtt" kind="subtitles" srclang="en" label="English">
                  </video>
                  <p class="mt-4 text-center text-gray-700">Step 1 — Go to <strong>Xtime.com</strong> then click <strong>LOGIN</strong></p>
                </div>

                <!-- Slide 2 -->
                <div class="carousel-slide hidden w-full flex flex-col justify-center">
                  <video controls class="training-video" preload="metadata">
                    <source src="./videos/Xtime username input.mp4" type="video/mp4">
                    <track src="./captions/login_step2.vtt" kind="subtitles" srclang="en" label="English">
                  </video>
                  <p class="mt-4 text-center text-gray-700">Step 2 — Enter your <strong>Username</strong></p>
                </div>

                <!-- Slide 3 -->
                <div class="carousel-slide hidden w-full flex flex-col justify-center">
                  <video controls class="training-video" preload="metadata">
                    <source src="./videos/Xtime password input.mp4" type="video/mp4">
                    <track src="./captions/login_step3.vtt" kind="subtitles" srclang="en" label="English">
                  </video>
                  <p class="mt-4 text-center text-gray-700">Step 3 — Enter your <strong>Password</strong></p>
                </div>

                <!-- Slide 4 -->
                <div class="carousel-slide hidden w-full flex flex-col justify-center">
                  <video controls class="training-video" preload="metadata">
                    <source src="./videos/Xtime tool selection.mp4" type="video/mp4">
                    <track src="./captions/login_step4.vtt" kind="subtitles" srclang="en" label="English">
                  </video>
                  <p class="mt-4 text-center text-gray-700">Step 4 — Select the <strong>Xtime tool</strong></p>
                </div>
              </div>

              <div class="flex justify-between items-center p-3 bg-white border-t">
                <button id="carouselPrev" class="px-4 py-2 bg-gray-200 text-gray-800 text-sm rounded-lg hover:bg-gray-300 transition" aria-label="Previous slide">Back</button>
                <div id="carouselDots" class="flex justify-center space-x-2"></div>
                <button id="carouselNext" class="px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-500 transition" aria-label="Next slide">Next</button>
              </div>
            </div>

            <div class="mt-6 max-w-4xl mx-auto bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded-r-lg">
              <p class="font-bold flex items-center"><i data-feather="edit-3" class="w-4 h-4 mr-2"></i>Take Notes</p>
              <ul class="list-disc pl-5 mt-2 space-y-1 text-sm">
                <li><strong>Always</strong> double-check your username and password before contacting support.</li>
                <li>If the page is slow, wait a few seconds — do not repeatedly click <strong>Login</strong>.</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- NAVIGATING DASHBOARD TAB-->
        <section id="dashboard" class="page">
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8" data-aos="fade-up">
            <h2 class="text-2xl font-semibold mb-6">2 — Navigating the Dashboard</h2>
            <div class="prose max-w-none">
              <ul class="space-y-2">
                <li>The dashboard shows a list of all <strong>dealerships</strong> tied to your account.</li>
                <li>Use the <mark>search bar</mark> to find a dealership quickly.</li>
                <li>Click <strong>Launch</strong> to open the dealership's Xtime Scheduler.</li>
              </ul>
            </div>
            <div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded-r-lg">
              <p class="font-bold flex items-center"><i data-feather="edit-3" class="w-4 h-4 mr-2"></i>Take Notes</p>
              <p class="mt-2 text-sm">Clicking the dealership name <strong>won't</strong> open the scheduler — use the <strong>Launch</strong> button.</p>
            </div>
          </div>
        </section>

        <!-- NEW APPT TAB-->
        <section id="newappt" class="page">
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8" data-aos="fade-up">
            <h2 class="text-2xl font-semibold mb-6">3 — Booking a New Appointment</h2>
            <div class="prose max-w-none">
              <ol class="space-y-2">
                <li>Click <strong>New Appointment</strong>.</li>
                <li><strong>Search</strong> for the customer by <mark>phone number</mark> (recommended), <mark>name</mark>, or <mark>email</mark>.</li>
                <li><strong>Verify</strong> the customer and the vehicle. If there are multiple vehicles, pick the one with a <strong>VIN</strong>.</li>
                <li>Select the correct <mark>service</mark> or maintenance package.</li>
                <li>Choose the <mark>date</mark>, <mark>time</mark>, and <mark>service advisor</mark>.</li>
                <li><strong>Review</strong> the appointment details and click <strong>Save/Confirm</strong>.</li>
                <li>Provide the customer with the confirmation details.</li>
              </ol>
            </div>
            <div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded-r-lg">
              <p class="font-bold flex items-center"><i data-feather="edit-3" class="w-4 h-4 mr-2"></i>Take Notes</p>
              <ul class="list-disc pl-5 mt-2 space-y-1 text-sm">
                <li><strong>Search first</strong> — always try to find the customer before creating new records.</li>
                <li><strong>VIN</strong> is important for recalls and certain packages — include it when possible.</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- RESCHEDULE TAB-->
        <section id="reschedule" class="page">
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8" data-aos="fade-up">
            <h2 class="text-2xl font-semibold mb-6">4 — Rescheduling an Appointment</h2>
            <div class="prose max-w-none">
              <ol class="space-y-2">
                <li>Search for the customer's existing appointment.</li>
                <li>Click the <strong>green appointment slot</strong> to open the details panel.</li>
                <li>Edit the <mark>date</mark>, <mark>time</mark> or service details as needed.</li>
                <li>Confirm the rescheduled appointment and inform the customer.</li>
              </ol>
            </div>
          </div>
        </section>

        <!-- CANCEL TAB -->
        <section id="cancel" class="page">
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8" data-aos="fade-up">
            <h2 class="text-2xl font-semibold mb-6">5 — Cancelling an Appointment</h2>
            <div class="prose max-w-none">
              <ol class="space-y-2">
                <li>Search for the customer's appointment.</li>
                <li>Open the appointment from the calendar.</li>
                <li>Confirm with the customer that they want to cancel (offer to reschedule).</li>
                <li>Proceed to cancel and provide confirmation to the customer.</li>
              </ol>
            </div>
          </div>
        </section>

        <!-- NEW CUSTOMER TAB -->
        <section id="newcustomer" class="page">
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 lg:p-8" data-aos="fade-up">
            <h2 class="text-2xl font-semibold mb-6">6 — Creating a New Customer</h2>
            <div class="prose max-w-none">
              <ol class="space-y-2">
                <li>Search first. If no record is found, click <strong>Quick Add</strong>.</li>
                <li>Enter <mark>First Name</mark>, <mark>Last Name</mark>, and <mark>Phone Number</mark>.</li>
                <li>Add vehicle information: <mark>Year/Make/Model</mark>, <mark>Mileage</mark>, and <mark>VIN</mark>.</li>
                <li>Save the customer and then create the appointment.</li>
              </ol>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>
  <!-- END OF XTIME MODULE  -->

  <!-- IMAGE MODAL -->
  <div id="imageModal" class="flex" role="dialog" aria-modal="true" aria-label="Image Modal">
    <img id="modalImage" src="" alt="">
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // init libs
      AOS.init({ duration: 600, easing: 'ease-out-quad', once: true });
      feather.replace();

      // refs
      const pages = document.querySelectorAll('.page');
      const sidebar = document.getElementById('sidebar');
      const mainHeaderTitle = document.getElementById('main-header-title');
      const mainContent = document.getElementById('main-content');

      // showPage: pageId (string), tabId (string, optional)
      function showPage(pageId, tabId) {
        const next = document.getElementById(pageId);
        if (!next) return;

        // hide all pages, show the one
        pages.forEach(p => p.classList.remove('active'));
        next.classList.add('active');

        // update header title from page h2 if exists
        const titleEl = next.querySelector('h2');
        mainHeaderTitle.textContent = titleEl ? titleEl.textContent : 'Training Modules';

        // update active tab styling: remove from all .tab-btn
        document.querySelectorAll('.tab-btn').forEach(t => {
          t.classList.remove('bg-blue-50','text-blue-600');
          t.classList.add('text-gray-700');
          t.removeAttribute('aria-current');
        });

        // determine tab to mark active:
        let activeTabEl = null;
        if (tabId) activeTabEl = document.getElementById(tabId);
        if (!activeTabEl) activeTabEl = document.querySelector(`.tab-btn[data-page="${pageId}"]`);
        if (activeTabEl) {
          activeTabEl.classList.add('bg-blue-50','text-blue-600');
          activeTabEl.setAttribute('aria-current','page');
        }

        // sidebar toggle: hide on dashboard-main
        if (pageId === 'dashboard-main') {
          sidebar.classList.add('-translate-x-full');
          mainContent.classList.remove('ml-64');
        } else {
          sidebar.classList.remove('-translate-x-full');
          mainContent.classList.add('ml-64');
        }

        // pause videos not in the active page (avoid background playback)
        document.querySelectorAll('video').forEach(v => {
          const p = v.closest('.page');
          if (!p || p.id !== pageId) {
            try { v.pause(); } catch(e) {}
          }
        });

        // scroll main area to top
        const scrollArea = document.querySelector('.flex-1.overflow-auto');
        if (scrollArea) scrollArea.scrollTop = 0;

        AOS.refresh();
      }

      // wire sidebar tab buttons (class .tab-btn)
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const pageId = btn.dataset.page;
          showPage(pageId, btn.id);
        });
      });

      // wire other clickable elements that navigate (cards / CTA) but avoid double-binding sidebar .tab-btn
      document.querySelectorAll('[data-page]:not(.tab-btn)').forEach(el => {
        // make keyboard accessible
        if (!['BUTTON','A'].includes(el.tagName)) {
          el.setAttribute('role','button');
          if (!el.hasAttribute('tabindex')) el.setAttribute('tabindex','0');
        }
        el.addEventListener('click', (e) => {
          e.preventDefault();
          const targetPage = el.dataset.page;
          // prefer explicit data-active-tab if provided
          const explicitTab = el.dataset.activeTab || null;
          showPage(targetPage, explicitTab);
        });
        el.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); el.click(); }
        });
      });

      // initial state
      showPage('dashboard-main', 'tab-dashboard-main');

      // --- Image modal ---
      const imageModal = document.getElementById('imageModal');
      const modalImage = document.getElementById('modalImage');
      function openModal(src, alt = '') {
        modalImage.src = src;
        modalImage.alt = alt;
        imageModal.style.display = 'flex';
      }
      function closeModal() {
        imageModal.style.display = 'none';
        modalImage.src = '';
        modalImage.alt = '';
      }
      // close by clicking outside image or press Esc
      imageModal.addEventListener('click', (e) => {
        if (e.target === modalImage) return; // clicked image -> do nothing
        closeModal();
      });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

      // expose openModal to window for easy usage from markup if needed
      window.openModal = openModal;

      // --- Login carousel ---
      (function initLoginCarousel() {
        const carouselRoot = document.getElementById('loginCarousel');
        if (!carouselRoot) return;
        const slides = carouselRoot.querySelectorAll('.carousel-slide');
        const dotsContainer = document.getElementById('carouselDots');
        const btnNext = document.getElementById('carouselNext');
        const btnPrev = document.getElementById('carouselPrev');
        if (!slides.length || !dotsContainer) return;

        let current = 0;
        // create dots
        slides.forEach((_, i) => {
          const d = document.createElement('button');
          d.className = 'w-3 h-3 rounded-full carousel-dot bg-gray-300';
          d.setAttribute('aria-label','Go to slide ' + (i+1));
          d.addEventListener('click', () => { current = i; show(current); });
          dotsContainer.appendChild(d);
        });
        const dots = dotsContainer.querySelectorAll('button');

        function updateDots(index) {
          dots.forEach((dot, i) => {
            dot.classList.toggle('bg-blue-600', i === index);
            dot.classList.toggle('bg-gray-300', i !== index);
            dot.style.transform = i === index ? 'scale(1.1)' : 'scale(1)';
          });
        }

        function show(index) {
          slides.forEach((s, i) => { s.classList.toggle('hidden', i !== index); });
          // pause videos in other slides
          slides.forEach((s, i) => {
            const v = s.querySelector('video');
            if (v) {
              if (i === index) {
                // keep as-is (user controls playback)
              } else {
                try { v.pause(); v.currentTime = 0; } catch(e) {}
              }
            }
          });
          updateDots(index);
        }

        function next() { current = (current + 1) % slides.length; show(current); }
        function prev() { current = (current - 1 + slides.length) % slides.length; show(current); }

        // wire buttons (if present)
        if (btnNext) btnNext.addEventListener('click', (e) => { e.preventDefault(); next(); });
        if (btnPrev) btnPrev.addEventListener('click', (e) => { e.preventDefault(); prev(); });

        // keyboard left/right only when login page is active
        document.addEventListener('keydown', (e) => {
          const activeLogin = document.getElementById('login').classList.contains('active');
          if (!activeLogin) return;
          if (e.key === 'ArrowLeft') prev();
          if (e.key === 'ArrowRight') next();
        });

        // swipe support
        let startX = 0;
        carouselRoot.addEventListener('touchstart', e => startX = e.touches[0].clientX, { passive: true });
        carouselRoot.addEventListener('touchend', e => {
          const diff = e.changedTouches[0].clientX - startX;
          if (diff > 50) prev();
          if (diff < -50) next();
        });

        // expose for debugging / external calls
        window.nextSlide = next;
        window.prevSlide = prev;

        // initial show
        show(current);
      })();

    }); // DOMContentLoaded
  </script>
</body>
</html>
